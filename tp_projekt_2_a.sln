#include <iostream>
#include <string>
#include <stack>
#include <cmath>
#include <cctype>
using namespace std;

void zamien_notacje(string przed_zamiana, string&po_zamianie);

int main()
{
	string zwykla;
	string odwr_polska;
	odwr_polska = {};
	getline(cin, zwykla);
	zamien_notacje(zwykla, odwr_polska);
	cout << odwr_polska;

	return 0;
}

void zamien_notacje(string przed_zamiana, string& po_zamianie)
{
	stack <char> znaki;
	bool czy_byla_cyfra=false;

	for (int i = 0; i < przed_zamiana.length() ; i++)
	{
		if (isdigit(przed_zamiana[i]) == true)
		{
			if (czy_byla_cyfra == true)
				po_zamianie += przed_zamiana[i];
			else
			{
				po_zamianie += ' ';
				po_zamianie += przed_zamiana[i];
				czy_byla_cyfra = true;
			}
		}
		else if (przed_zamiana[i] == '+' or przed_zamiana[i] == '-')
		{
			if (znaki.top() == '+' or znaki.top() == '-')
			{
				while (znaki.top() == '+' or znaki.top()=='-')
				{
					przed_zamiana += ' ';
					przed_zamiana += znaki.top();
					znaki.pop();
				}
			}
			czy_byla_cyfra = false;
			znaki.push(przed_zamiana[i]);
		}
		else if (przed_zamiana[i] == '*' or przed_zamiana[i] == '/')
		{
			while (znaki.top() == '+' or znaki.top() == '-' or znaki.top() == '*' or znaki.top() == '/')
			{
				przed_zamiana += ' ';
				przed_zamiana += znaki.top();
				znaki.pop();
			}

			czy_byla_cyfra = false;
			znaki.push(przed_zamiana[i]);
		}
		else if (przed_zamiana[i] == '^')
		{
			while (znaki.top() == '+' or znaki.top() == '-' or znaki.top() == '*' or znaki.top() == '/' or znaki.top() == '^')
			{
				przed_zamiana += ' ';
				przed_zamiana += znaki.top();
				znaki.pop();
			}
			czy_byla_cyfra = false;
			znaki.push(przed_zamiana[i]);
		}
		else if (przed_zamiana[i] == '(')
		{
			czy_byla_cyfra = false;
			znaki.push(przed_zamiana[i]);
		}
		else if (przed_zamiana[i] == ')')
		{
			while (znaki.top() != '(')
			{
				po_zamianie += ' ';
				po_zamianie += znaki.top();
				znaki.pop();
				czy_byla_cyfra = false;
			}
		}
	}
	while (!znaki.empty())
	{
		po_zamianie += ' ';
		po_zamianie += znaki.top();
	}
}
